This is the firmware for the Qualcomm Atheros AR7010 and AR9271 USB
802.11n NICs.

What is this exactly?
---------------------

This is the firmware which resides in RAM on the AR7010/AR9271 NICs.
It is used by ath9k (Linux) and athn (OpenBSD) to provide wireless
services.

What licence is this covered by?
--------------------------------

The Qualcomm Atheros owned code is under the ClearBSD licence.

The NOTICES.TXT file contains copyright notices for software which
this firmware release leverages.

There is some code that is based off of work done under contract
but is owned by Qualcomm Atheros; the original copyright statements
from that work are in NOTICES.TXT.

The Tensilica code (xtos/xtensa) is distributed with permission from
Tensilica, Inc., under the MIT licence.

There are three ECOS source files distributed under the terms of
the GPLv2, with a caveat that linking or using the source files does
not bring the rest of the binary under the GPLv2.  Please read the
ECOS caveats in more detail.


Ok, what are those NICs?
------------------------

The AR7010 is a USB/PCIe SoC with onboard RAM, ROM and flash.
It comes with an external wireless chip connected via PCIe - typically
an AR9280 or AR9287. For a list of devices using AR7010, see:
https://wikidevi.com/wiki/Atheros_AR7010#Table_of_Systems

The AR9271 is a USB/Wifi SoC with onboad RAM, ROM, flash and the
actual wireless chip.  The wireless core is an off-shoot of the AR9285.
It is a single-chip solution. For a list of devices using AR9271, see:
https://wikidevi.com/wiki/Atheros_AR9271#Table_of_Systems

Debian / Ubuntu
---------------

* Build and install the firmware: (takes a few minutes)

sudo apt-get update && sudo apt-get upgrade
sudo apt-get install build-essential git cmake
git clone https://github.com/qca/open-ath9k-htc-firmware.git
cd open-ath9k-htc-firmware
make toolchain
make -C target_firmware
sudo make install-linux

* Connect your AR9271 / AR7010 Wi-Fi adapter to your computer.

* Verify that the device is detected and the new firmware is loaded:

dmesg | tail -n 30

[2.148045] usb 3-2: new high-speed USB device number 4 using xhci_hcd
[2.172582] usb 3-2: New USB device found, idVendor=0cf3, idProduct=9271
[2.172589] usb 3-2: New USB device strings: Mfr=16, Product=32, SerialNumber=48
[2.172593] usb 3-2: Product: USB2.0 WLAN
[2.172595] usb 3-2: Manufacturer: ATHEROS
[2.172598] usb 3-2: SerialNumber: 12345
[2.173156] usb 3-2: ath9k_htc: Firmware htc_9271.fw requested
[2.456028] usb 3-2: ath9k_htc: Transferred FW: htc_9271.fw, size: 51008
[2.707644] ath9k_htc 3-2:1.0: ath9k_htc: HTC initialized with 33 credits
[2.976045] ath9k_htc 3-2:1.0: ath9k_htc: FW Version: 1.4
[2.981115] ieee80211 phy4: Atheros AR9271 Rev:1
[2.991007] systemd-udevd[697]: renamed network interface wlan1 to wlan6

* You can now use the new wlan interface (wlan6 in the example above).

How do I build it?
------------------

You're in for a treat.

* Install the cmake build tool (http://www.cmake.org/).
  Major distributions have packages for this.

* For FreeBSD - install gmake and wget.

* You first have to build the toolchain.

  * Linux:

  $ make toolchain

  * FreeBSD:

  $ gmake toolchain

  (Yes, I made this work on FreeBSD as well.)

* Next, build the firmware.

  * Linux:

  $ make -C target_firmware

  * FreeBSD:

  $ gmake -C target_firmware

You will end up with two .fw files - one for the AR7010 and one for
the AR9271 in the target_firmware directory.

You can clean the firmware build (when you wish to force a rebuild)
by doing:

  * Linux:

  $ make -C target_firmware clean

  * FreeBSD:

  $ gmake -C target_firmware clean

Then what?
----------

You need to then copy this into the relevant location for your operating
system.  Yes, this means you need a driver.  No, there's no FreeBSD
driver yet for this particular chipset, sorry.


Where do I file bugs?
---------------------

Please file bugs in github - http://github.com/qca/open-ath9k-htc-firmware/issues .


Mailing lists?
--------------

Here you go:

http://lists.infradead.org/mailman/listinfo/ath9k_htc_fw

And

ath9k_htc_fw@lists.infradead.org

